/*! For license information please see smf.parser.min.js.LICENSE */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("SMF",[],t):"object"==typeof exports?exports.SMF=t():e.SMF=t()}("undefined"!=typeof self?self:this,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=5)}([function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"c",(function(){return i})),r.d(t,"b",(function(){return a}));class n{constructor(e,t,r){this.subtype=e,this.deltaTime=t,this.time=r}}class s extends n{constructor(e,t,r,n,s,i){super(e,t,r),this.channel=n,this.parameter1=s,this.parameter2=i}}class i extends n{constructor(e,t,r,n){super(e,t,r),this.data=n}}class a extends n{constructor(e,t,r,n){super(e,t,r),this.data=n}}},function(e,t,r){"use strict";t.a={version:"0.3.4",date:"2020-01-13T02:21:59.690Z"}},,,function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));class n{constructor(e,t={}){this.input=e,this.ip=t.index||0,this.length=t.length||e.length-this.ip,this.chunkList,this.offset=this.ip,this.padding=void 0===t.padding||t.padding,this.bigEndian=void 0!==t.bigEndian&&t.bigEndian}parse(){const e=this.length+this.offset;for(this.chunkList=[];this.ip<e;)this.parseChunk()}parseChunk(){const e=this.input;let t,r=this.ip;this.chunkList.push(new s(String.fromCharCode(e[r++],e[r++],e[r++],e[r++]),t=this.bigEndian?(e[r++]<<24|e[r++]<<16|e[r++]<<8|e[r++])>>>0:(e[r++]|e[r++]<<8|e[r++]<<16|e[r++]<<24)>>>0,r)),r+=t,this.padding&&1==(r-this.offset&1)&&r++,this.ip=r}getChunk(e){const t=this.chunkList[e];return void 0===t?null:t}getNumberOfChunks(){return this.chunkList.length}}class s{constructor(e,t,r){this.type=e,this.size=t,this.offset=r}}},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return a}));var n=r(0),s=r(1),i=r(4);class a{constructor(e,t={}){t.padding=!1,t.bigEndian=!0,this.input=e,this.ip=t.index||0,this.chunkIndex=0,this.riffParser_=new i.a(e,t),this.formatType=0,this.numberOfTracks=0,this.timeDivision=0,this.tracks=[],this.plainTracks=[],this.version=s.a.version,this.build=s.a.build}parse(){let e=0,t=0;for(this.riffParser_.parse(),this.parseHeaderChunk(),e=0,t=this.numberOfTracks;e<t;++e)this.parseTrackChunk()}parseHeaderChunk(){const e=this.riffParser_.getChunk(this.chunkIndex++),t=this.input;let r=e.offset;if(!e||"MThd"!==e.type)throw new Error("invalid header signature");this.formatType=t[r++]<<8|t[r++],this.numberOfTracks=t[r++]<<8|t[r++],this.timeDivision=t[r++]<<8|t[r++]}parseTrackChunk(){const e=this.riffParser_.getChunk(this.chunkIndex++),t=this.input;let r,s,i=e.offset,a=0,u=0,o=0,c=0,h=-1,f=-1,p=0,l=0,d=0,b=0,k=0;const y=()=>{let e=0,r=0;do{r=t[i++],e=e<<7|127&r}while(0!=(128&r));return e};if(!e||"MTrk"!==e.type)throw new Error("invalid header signature");a=e.offset+e.size;const m=[],g=[];for(;i<a;){u=y(),l+=u,d=i,k=t[i++],o=k>>4&15,c=15&k,o<8?(o=h,c=f,k=h<<4|f,i--,d--):(h=o,f=c);const e=[,,,,,,,,"NoteOff","NoteOn","NoteAftertouch","ControlChange","ProgramChange","ChannelAftertouch","PitchBend"];switch(o){case 8:case 9:case 10:case 11:case 13:case 14:r=new n.a(e[o],u,l,c,t[i++],t[i++]);break;case 12:r=new n.a(e[o],u,l,c,t[i++]);break;case 15:switch(c){case 0:if(p=y(),247!==t[i+p-1])throw new Error("invalid SysEx event");r=new n.c("SystemExclusive",u,l,t.subarray(i,(i+=p)-1));break;case 7:p=y(),r=new n.c("SystemExclusive(F7)",u,l,t.subarray(i,i+=p));break;case 15:switch(o=t[i++],p=y(),o){case 0:r=new n.b("SequenceNumber",u,l,[t[i++],t[i++]]);break;case 1:r=new n.b("TextEvent",u,l,[String.fromCharCode.apply(null,t.subarray(i,i+=p))]);break;case 2:r=new n.b("CopyrightNotice",u,l,[String.fromCharCode.apply(null,t.subarray(i,i+=p))]);break;case 3:r=new n.b("SequenceTrackName",u,l,[String.fromCharCode.apply(null,t.subarray(i,i+=p))]);break;case 4:r=new n.b("InstrumentName",u,l,[String.fromCharCode.apply(null,t.subarray(i,i+=p))]);break;case 5:r=new n.b("Lyrics",u,l,[String.fromCharCode.apply(null,t.subarray(i,i+=p))]);break;case 6:r=new n.b("Marker",u,l,[String.fromCharCode.apply(null,t.subarray(i,i+=p))]);break;case 7:r=new n.b("CuePoint",u,l,[String.fromCharCode.apply(null,t.subarray(i,i+=p))]);break;case 32:r=new n.b("MidiChannelPrefix",u,l,[t[i++]]);break;case 47:r=new n.b("EndOfTrack",u,l,[]);break;case 81:r=new n.b("SetTempo",u,l,[t[i++]<<16|t[i++]<<8|t[i++]]);break;case 84:r=new n.b("SmpteOffset",u,l,[t[i++],t[i++],t[i++],t[i++],t[i++]]);break;case 88:r=new n.b("TimeSignature",u,l,[t[i++],t[i++],t[i++],t[i++]]);break;case 89:r=new n.b("KeySignature",u,l,[t[i++],t[i++]]);break;case 127:r=new n.b("SequencerSpecific",u,l,[t.subarray(i,i+=p)]);break;default:r=new n.b("Unknown",u,l,[o,t.subarray(i,i+=p)])}}break;default:throw new Error("invalid status")}b=i-d,s=t.subarray(d,d+b),s[0]=k,r instanceof n.a&&"NoteOn"===r.subtype&&0===r.parameter2&&(r.subtype=e[8],s=new Uint8Array([128|r.channel,r.parameter1,r.parameter2])),g.push(s),m.push(r)}this.tracks.push(m),this.plainTracks.push(g)}}}])}));